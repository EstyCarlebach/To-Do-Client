{"ast":null,"code":"import axios from \"axios\";\nimport { jwtDecode } from 'jwt-decode';\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\nconsole.log('process.env.API_URL', process.env.REACT_APP_API_URL);\nsetAuthorizationBearer();\nfunction saveAccessToken(authResult) {\n  localStorage.setItem(\"access_token\", authResult.token);\n  setAuthorizationBearer();\n}\nfunction setAuthorizationBearer() {\n  const accessToken = localStorage.getItem(\"access_token\");\n  if (accessToken) {\n    axios.defaults.headers.common[\"Authorization\"] = `Bearer ${accessToken}`;\n  }\n}\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response.status === 401) {\n    return window.location.href = \"/login\";\n  }\n  return Promise.reject(error);\n});\nexport default {\n  getLoginUser: () => {\n    const accessToken = localStorage.getItem(\"access_token\");\n    if (accessToken) {\n      return jwtDecode(accessToken);\n    }\n    return null;\n  },\n  logout: () => {\n    localStorage.setItem(\"access_token\", \"\");\n  },\n  register: async (email, password) => {\n    const res = await axios.post(\"/register\", {\n      email,\n      password\n    });\n    saveAccessToken(res.data);\n  },\n  login: async (email, password) => {\n    const res = await axios.post(\"/login\", {\n      email,\n      password\n    });\n    saveAccessToken(res.data);\n  },\n  login1: async user => {\n    const res = await axios.post(\"/login\", {\n      user\n    });\n    saveAccessToken(res.data);\n  },\n  getPublic: async () => {\n    const res = await axios.get(\"/public\");\n    return res.data;\n  },\n  getPrivate: async () => {\n    const res = await axios.get(\"/private\");\n    return res.data;\n  }\n};","map":{"version":3,"names":["axios","jwtDecode","defaults","baseURL","process","env","REACT_APP_API_URL","console","log","setAuthorizationBearer","saveAccessToken","authResult","localStorage","setItem","token","accessToken","getItem","headers","common","interceptors","response","use","error","status","window","location","href","Promise","reject","getLoginUser","logout","register","email","password","res","post","data","login","login1","user","getPublic","get","getPrivate"],"sources":["C:/Users/This User/Documents/מסלול/שנה ב/פרויקטים/פרקטי קוד/בסיעתא דשמיא פרויקט 3/Client/ToDoListReact/src/Service.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { jwtDecode } from 'jwt-decode'; \r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\nconsole.log('process.env.API_URL', process.env.REACT_APP_API_URL)\r\nsetAuthorizationBearer();\r\n\r\nfunction saveAccessToken(authResult) {\r\n  localStorage.setItem(\"access_token\", authResult.token);\r\n  setAuthorizationBearer();\r\n}\r\n\r\nfunction setAuthorizationBearer() {\r\n  const accessToken = localStorage.getItem(\"access_token\");\r\n  if (accessToken) {\r\n    axios.defaults.headers.common[\"Authorization\"] = `Bearer ${accessToken}`;\r\n  }\r\n}\r\n\r\naxios.interceptors.response.use(\r\n  function(response) {\r\n    return response;\r\n  },\r\n  function(error) {\r\n    if (error.response.status === 401) {\r\n      return (window.location.href = \"/login\");\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default {\r\n  getLoginUser: () => {\r\n    const accessToken = localStorage.getItem(\"access_token\");\r\n    if (accessToken) {\r\n      return jwtDecode(accessToken);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  logout:()=>{\r\n    localStorage.setItem(\"access_token\", \"\");\r\n  },\r\n\r\n  register: async (email, password) => {\r\n    const res = await axios.post(\"/register\", { email, password });\r\n    saveAccessToken(res.data);\r\n  },\r\n\r\n  login: async (email, password) => {\r\n    const res = await axios.post(\"/login\", { email, password });\r\n    saveAccessToken(res.data);\r\n  },\r\n  login1: async (user) => {\r\n    const res = await axios.post(\"/login\", {user});\r\n    saveAccessToken(res.data);\r\n  },\r\n\r\n  getPublic: async () => {\r\n    const res = await axios.get(\"/public\");\r\n    return res.data;\r\n  },\r\n\r\n  getPrivate: async () => {\r\n    const res = await axios.get(\"/private\");\r\n    return res.data;\r\n  },\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,YAAY;AAEtCD,KAAK,CAACE,QAAQ,CAACC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;AACtDC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEJ,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAAC;AACjEG,sBAAsB,CAAC,CAAC;AAExB,SAASC,eAAeA,CAACC,UAAU,EAAE;EACnCC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEF,UAAU,CAACG,KAAK,CAAC;EACtDL,sBAAsB,CAAC,CAAC;AAC1B;AAEA,SAASA,sBAAsBA,CAAA,EAAG;EAChC,MAAMM,WAAW,GAAGH,YAAY,CAACI,OAAO,CAAC,cAAc,CAAC;EACxD,IAAID,WAAW,EAAE;IACff,KAAK,CAACE,QAAQ,CAACe,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUH,WAAW,EAAE;EAC1E;AACF;AAEAf,KAAK,CAACmB,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC7B,UAASD,QAAQ,EAAE;EACjB,OAAOA,QAAQ;AACjB,CAAC,EACD,UAASE,KAAK,EAAE;EACd,IAAIA,KAAK,CAACF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IACjC,OAAQC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACzC;EACA,OAAOC,OAAO,CAACC,MAAM,CAACN,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAe;EACbO,YAAY,EAAEA,CAAA,KAAM;IAClB,MAAMd,WAAW,GAAGH,YAAY,CAACI,OAAO,CAAC,cAAc,CAAC;IACxD,IAAID,WAAW,EAAE;MACf,OAAOd,SAAS,CAACc,WAAW,CAAC;IAC/B;IACA,OAAO,IAAI;EACb,CAAC;EAEDe,MAAM,EAACA,CAAA,KAAI;IACTlB,YAAY,CAACC,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC;EAC1C,CAAC;EAEDkB,QAAQ,EAAE,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;IACnC,MAAMC,GAAG,GAAG,MAAMlC,KAAK,CAACmC,IAAI,CAAC,WAAW,EAAE;MAAEH,KAAK;MAAEC;IAAS,CAAC,CAAC;IAC9DvB,eAAe,CAACwB,GAAG,CAACE,IAAI,CAAC;EAC3B,CAAC;EAEDC,KAAK,EAAE,MAAAA,CAAOL,KAAK,EAAEC,QAAQ,KAAK;IAChC,MAAMC,GAAG,GAAG,MAAMlC,KAAK,CAACmC,IAAI,CAAC,QAAQ,EAAE;MAAEH,KAAK;MAAEC;IAAS,CAAC,CAAC;IAC3DvB,eAAe,CAACwB,GAAG,CAACE,IAAI,CAAC;EAC3B,CAAC;EACDE,MAAM,EAAE,MAAOC,IAAI,IAAK;IACtB,MAAML,GAAG,GAAG,MAAMlC,KAAK,CAACmC,IAAI,CAAC,QAAQ,EAAE;MAACI;IAAI,CAAC,CAAC;IAC9C7B,eAAe,CAACwB,GAAG,CAACE,IAAI,CAAC;EAC3B,CAAC;EAEDI,SAAS,EAAE,MAAAA,CAAA,KAAY;IACrB,MAAMN,GAAG,GAAG,MAAMlC,KAAK,CAACyC,GAAG,CAAC,SAAS,CAAC;IACtC,OAAOP,GAAG,CAACE,IAAI;EACjB,CAAC;EAEDM,UAAU,EAAE,MAAAA,CAAA,KAAY;IACtB,MAAMR,GAAG,GAAG,MAAMlC,KAAK,CAACyC,GAAG,CAAC,UAAU,CAAC;IACvC,OAAOP,GAAG,CAACE,IAAI;EACjB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}